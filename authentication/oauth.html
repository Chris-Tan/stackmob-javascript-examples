<html>
<head>
<title>OAuth 2.0 Login Example</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript" src="http://static.stackmob.com/js/json2-min.js"></script>
<script type="text/javascript" src="http://static.stackmob.com/js/underscore-1.3.0-min.js"></script>
<script type="text/javascript" src="http://static.stackmob.com/js/backbone-0.5.3-min.js"></script>
<script type="text/javascript" src="../stackmob.js"></script>
<script type="text/javascript">
  //Find your info here: https://www.stackmob.com/platform/account/apps/reset
  StackMob.init({
    appName: 'your app name',
    clientSubdomain: 'your subdomain',
    publicKey: 'your public key',
    apiVersion: 0
  });
  
  $(document).ready(function() {
  	$('#createUser').click(function() {
  		var user = new StackMob.User({ username: 'oauthtestuser', password: 'oauthtestpassword' });
  		user.createViaOAuth2({
  			success: function(model) {
  				console.debug('USER CREATED');
  			}
  		});
  	});
  });
</script>
</head>
<body>
	
<h1>OAuth 2.0 Example</h1>

<ol>
	<li>First create the user.</li>
	<li>Then login as the user.</li>
</ol>

<ul>
	<li><a href="javascript:void(0);" id="createUser">Create User/Pass: oauthtestuser/oauthtestpassword</a></li>
</ul>

<div class="loginform">
	<form action="/user/accessToken" method="POST">
		Username: <input type="text" name="username" value="oauthtestuser"/>
		Password: <input type="password" name="password" value="oauthtestpassword"/>
		
		<input type="hidden" name="redirect_uri" value="http://127.0.0.1:4567/authentication/loggedIn.html"/>
		
		<input type="submit" value="Login"/>
	</form>
	
	<script type="text/javascript">
  	//Adds required StackMob OAuth 2.0-related hidden fields to your login form
  	//Looks for any form with action ending in /.*/accessToken
  	StackMob.initOAuthForm();
	</script>
	
</div>


</body>
</html>